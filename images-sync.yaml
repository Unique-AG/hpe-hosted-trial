# Sync docker images to Harbor

# Requirements:
# - Azure CLI `az acr login --name uniqueapp`
# - Docker CLI `docker login harbor.ingress.pcai0201.fr2.hpecolo.net`
# 
# To access harbor, you need to define a credential helper in your `~/.docker/config.json` file:
# ```json
# {
#   "credHelpers": {
#     "harbor.ingress.pcai0201.fr2.hpecolo.net": "desktop"
#   }
# }
# ```

# Sync command to sync this file to Harbor:
# skopeo sync --src yaml --dest docker --all images-sync.yaml harbor.ingress.pcai0201.fr2.hpecolo.net/library/

# Syntax Reference: https://github.com/containers/skopeo/blob/main/docs/skopeo-sync.1.md#yaml-file-content-used-source-for---src-yaml

uniqueapp.azurecr.io:
  images-by-tag-regex:
    # Backend Services
    app-repository: ^2025\.17-\w*$
    ingestion-worker: ^2025\.17-\w*$
    ingestion: ^2025\.17-\w*$
    node-chat: ^2025\.17-\w*$
    node-scope-management: ^2025\.17-\w*$
    node-theme: ^2025\.17-\w*$
    typescript-service-event-socket: ^2025\.17-\w*$
    webhook-scheduler: ^2025\.17-\w*$
    webhook-worker: ^2025\.17-\w*$
    # Frontend Web Apps
    admin: ^2025\.17-\w*$
    chat: ^2025\.17-\w*$
    knowledge-upload: ^2025\.17-\w*$
    theme: ^2025\.09-\w*$
    # AI Services
    assistants-core: ^2025\.17-\w*$
    assistants-reranker: ^2025\.17-\w*$